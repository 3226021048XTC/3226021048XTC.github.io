---
title: 变量与相关关键字
abbrlink: 64906
date: 2022-11-24 02:11:09
tags:
---

### 作用域

作用域是指变量的有效范围，即变量可以在哪个范围以内使用；变量的作用域由变量的定义位置决定，在不同位置定义的变量，它的作用域是不一样的

### 局部变量

定义在函数内部的变量，作用域仅限于此函数内部，超出函数范围不可使用；注意函数的形参也是局部变量（Local Variable）；

### 全局变量

在函数的外部定义的变量称为全局变量（Global Variable）；默认作用域是整个程序，即所有的代码文件，包括源文件（**.c**文件）和头文件（**.h**文件）;

说明：在一个函数内部修改全局变量的值会影响其它函数，全局变量的值在函数内部被修改后并不会自动恢复，它会一直保留该值，直到下次被修改。

###### 如果某个函数内部局部变量和全局变量同名，则在当前函数中全局变量不起作用；

变量的使用遵循就近原则，如果在当前的局部作用域中找到了同名变量，就不会再去更大的全局作用域中查找。

#### 局部变量与全局变量

定义时全局变量的值为0，而局部变量的值时随机的；

两者的作用域不同；

全局变量分配在数据段（数据段存的是数）上，而局部变量分配在栈上面；

#### 关键字

auto：在声明局部变量时，不加关键字均默认为auto，变量与数据分配在动态存储区；

static：声明时在局部变量的类型前加该关键字，表示该局部变量是“静态局部变量”，这样在函数的调用结束后该变量不会消失，即占用的内存空间不会释放，下一次函数调用时该变量的值为上一次函数结束时的值；

register：在声明动态局部变量或者函数形参时，可将变量声明为register，这样编译系统就会为变量分配一个寄存器而不是内存空间，通过这种方式可提升对某些局部变量频繁调用的程序的性能。（寄存器运算速度远高于内存）

extern：对于一个文件内，extern声明的变量相当于告诉编译器该变量是存在的，但不在该调用位置的前面，即定义在该调用之后，相当于扩大该变量的作用域；（真正的作用）对于不是同一个文件，可以引用不是同一个文件的变量（需为全局变量）和函数，另外extern关键字只需要指明类型和变量名就行了，不能再重新赋值，初始化需要在原文件所在处进行，而关于函数的引用，需要注意的就是，需要指明返回值的类型和参数。

#### 静态变量与动态变量

定义或者声明变量时，没有static修饰符的就是动态变量，有static修饰符的就是静态变量；

**静态全局变量**：动态全局变量可以通过extern关键字在外部文件中使用，但静态全局变量不可以在外部文件中使用，静态全局变量相当于限制了动态全局变量的作用域。

**静态局部变量**：静态局部变量的生命周期是到程序的结束，而动态局部变量的生命周期是函数的结束，静态局部变量的生命周期更长，同时静态局部变量只会初始化一次，函数重复调用，但静态局部变量不会被重新初始化。
