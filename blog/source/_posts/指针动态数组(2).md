---
title: 指针动态数组(2)
abbrlink: 29981
date: 2022-10-27 01:28:12
tags:
---

# new函数(分配空间)

使用格式:

     (1)指针变量名=new 类型标识符；
     (2)指针变量名=new 类型标识符(初始值)；
     (3)指针变量吗=new 类型标识符[内存单元个数]；

对于(1)申请**一个**类型标识符大小的字节空间给指针变量名，对于(2)在申请**一个**类型标识符的同时对申请的空间进行赋予初始值，而对于(3)则是申请一个动态数组；

其中分配成功则返回对象类型的指针地址，失败会抛出异常；

# delete函数(对于上面的new函数)

delete函数用于回收new函数分配的内存空间

其中对于单个对象的内存空间的时候用**delete 指针变量名** 释放空间；

对于用new[]分配的一组内存空间，用**delete []指针变量名** 释放空间；

# new函数与malloc函数的一些区别

1. new是从自由存储区上动态分配空间，而malloc函数则是在堆上动态分配空间；其中自由存储区是C++的一个基于new操作符的抽象概念，即通过new函数动态申请的空间内存都为自由存储区；堆是系统的术语，是系统维护的一块特殊内存，用于内存的动态分配；关于自由存储区，不仅可以是堆，也可以是静态存储区，这取决于operator new将对象分配到哪个空间~~(ps:目前我也不懂，以后再了解学习，嘻嘻)~~；

2. 分配成功时new返回不需要进行强制类型转换，malloc返回的时void*，需要进行强制转换类型，基于这一点new函数的安全性高于malloc函数；

3. 分配失败时malloc函数返回NULL，而new函数直接抛出程序异常；

4. 对于申请的内存空间大小，malloc函数需要进行计算，而new函数无需指定内存空间大小，系统会根据类型信息自行计算；
