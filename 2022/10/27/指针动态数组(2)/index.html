<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title>指针动态数组(2) · Hexo</title><meta name="description" content="new函数(分配空间)使用格式:
 (1)指针变量名=new 类型标识符；
 (2)指针变量名=new 类型标识符(初始值)；
 (3)指针变量吗=new 类型标识符[内存单元个数]；
对于(1)申请一个类型标识符大小的字节空间给指针变量名，对于(2)在申请一个类型标识符的同时对申请的空间进行赋予初"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Hexo</a></h3></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a target="_blank" rel="noopener" href="https://www.caicai.me"> CaiCai </a><span>&</span><a target="_blank" rel="noopener" href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>指针动态数组(2)</a></h3></div><div class="post-content"><h1 id="new函数-分配空间"><a href="#new函数-分配空间" class="headerlink" title="new函数(分配空间)"></a>new函数(分配空间)</h1><p>使用格式:</p>
<pre><code> (1)指针变量名=new 类型标识符；
 (2)指针变量名=new 类型标识符(初始值)；
 (3)指针变量吗=new 类型标识符[内存单元个数]；
</code></pre><p>对于(1)申请<strong>一个</strong>类型标识符大小的字节空间给指针变量名，对于(2)在申请<strong>一个</strong>类型标识符的同时对申请的空间进行赋予初始值，而对于(3)则是申请一个动态数组；</p>
<p>其中分配成功则返回对象类型的指针地址，失败会抛出异常；</p>
<h1 id="delete函数-对于上面的new函数"><a href="#delete函数-对于上面的new函数" class="headerlink" title="delete函数(对于上面的new函数)"></a>delete函数(对于上面的new函数)</h1><p>delete函数用于回收new函数分配的内存空间</p>
<p>其中对于单个对象的内存空间的时候用<strong>delete 指针变量名</strong> 释放空间；</p>
<p>对于用new[]分配的一组内存空间，用<strong>delete []指针变量名</strong> 释放空间；</p>
<h1 id="new函数与malloc函数的一些区别"><a href="#new函数与malloc函数的一些区别" class="headerlink" title="new函数与malloc函数的一些区别"></a>new函数与malloc函数的一些区别</h1><ol>
<li><p>new是从自由存储区上动态分配空间，而malloc函数则是在堆上动态分配空间；其中自由存储区是C++的一个基于new操作符的抽象概念，即通过new函数动态申请的空间内存都为自由存储区；堆是系统的术语，是系统维护的一块特殊内存，用于内存的动态分配；关于自由存储区，不仅可以是堆，也可以是静态存储区，这取决于operator new将对象分配到哪个空间<del>(ps:目前我也不懂，以后再了解学习，嘻嘻)</del>；</p>
</li>
<li><p>分配成功时new返回不需要进行强制类型转换，malloc返回的时void*，需要进行强制转换类型，基于这一点new函数的安全性高于malloc函数；</p>
</li>
<li><p>分配失败时malloc函数返回NULL，而new函数直接抛出程序异常；</p>
</li>
<li><p>对于申请的内存空间大小，malloc函数需要进行计算，而new函数无需指定内存空间大小，系统会根据类型信息自行计算；</p>
</li>
</ol>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2022-10-27</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,http://example.com/2022/10/27/指针动态数组(2)/,Hexo,指针动态数组(2),;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2022/11/22/%E5%AE%8F%E5%AE%9A%E4%B9%89/" title="宏定义">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2022/10/25/%E6%8C%87%E9%92%88%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84(1)/" title="指针动态数组（1）">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/z16.model.json"},"display":{"position":"left","width":300,"height":600,"hOffset":-15,"vOffset":-15},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body></html>